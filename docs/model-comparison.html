<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Model Comparison - 2×2 Matrix</title>
    <style>:root {
    --bg-primary: #0a0a0f;
    --bg-secondary: #12121a;
    --bg-card: #18182a;
    --border-color: #2a2a40;
    --text-primary: #e8e8f0;
    --text-secondary: #888899;
    --text-muted: #555566;
    --accent-home: #00d4aa;
    --accent-away: #ff6b6b;
    --accent-kalshi: #f7931a;
    --accent-highlight: #7c3aed;
    --fifty-line: rgba(255, 255, 255, 0.15);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Space Grotesk', sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    min-height: 100vh;
    background: 
        radial-gradient(ellipse at 20% 0%, rgba(124, 58, 237, 0.08) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 100%, rgba(0, 212, 170, 0.05) 0%, transparent 50%),
        var(--bg-primary);
}

.container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 24px;
}

/* Header */
.app-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 32px;
    padding: 20px 0;
    border-bottom: 1px solid var(--border-color);
    gap: 32px;
}

.header-brand {
    flex-shrink: 0;
}

.brand-link {
    text-decoration: none;
    display: block;
}

.brand-link:hover .app-title {
    opacity: 0.8;
    transition: opacity 0.2s ease;
}

.app-title {
    font-size: 1.75rem;
    font-weight: 700;
    background: linear-gradient(135deg, var(--accent-home), var(--accent-highlight));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin: 0;
    cursor: pointer;
    transition: opacity 0.2s ease;
}

.app-subtitle {
    color: var(--text-secondary);
    font-size: 0.875rem;
    margin-top: 6px;
    margin-bottom: 0;
}

.data-sources {
    display: flex;
    gap: 12px;
}

.source-badge {
    font-size: 0.75rem;
    padding: 4px 10px;
    border-radius: 12px;
    font-weight: 500;
    letter-spacing: 0.02em;
}

.source-badge.espn {
    background: rgba(0, 212, 170, 0.15);
    color: var(--accent-home);
    border: 1px solid rgba(0, 212, 170, 0.3);
}

.source-badge.kalshi {
    background: rgba(247, 147, 26, 0.15);
    color: var(--accent-kalshi);
    border: 1px solid rgba(247, 147, 26, 0.3);
}

/* Header Navigation */
.header-nav {
    display: flex;
    gap: 8px;
    align-items: center;
    flex-wrap: wrap;
}

.nav-link {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 10px 16px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    color: var(--text-primary);
    text-decoration: none;
    font-size: 0.875rem;
    font-weight: 500;
    font-family: 'Space Grotesk', sans-serif;
    transition: all 0.2s ease;
    white-space: nowrap;
    cursor: pointer;
}

.nav-link:hover {
    background: var(--bg-secondary);
    border-color: var(--accent-highlight);
    color: var(--accent-highlight);
    transform: translateY(-1px);
}

.nav-link.active {
    background: linear-gradient(135deg, rgba(124, 58, 237, 0.15), rgba(0, 212, 170, 0.15));
    border-color: var(--accent-highlight);
    color: var(--accent-highlight);
}

.nav-link.nav-button {
    background: var(--bg-card);
}

.nav-link.nav-button:hover:not(:disabled) {
    background: var(--bg-secondary);
    border-color: var(--accent-highlight);
    color: var(--accent-highlight);
}

.nav-link.nav-button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.nav-icon {
    font-size: 1rem;
    line-height: 1;
}

.nav-text {
    line-height: 1;
}

/* Legacy classes for backward compatibility */
.stats-page-link,
.simulation-link,
.live-games-link {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 10px 16px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    color: var(--text-primary);
    text-decoration: none;
    font-size: 0.875rem;
    font-weight: 500;
    transition: all 0.2s ease;
}

.stats-page-link:hover,
.simulation-link:hover,
.live-games-link:hover {
    background: var(--bg-secondary);
    border-color: var(--accent-highlight);
    color: var(--accent-highlight);
}

.clear-cache-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 10px 16px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    color: var(--text-primary);
    font-family: 'Space Grotesk', sans-serif;
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
}

.clear-cache-btn:hover:not(:disabled) {
    background: var(--bg-secondary);
    border-color: var(--accent-highlight);
    color: var(--accent-highlight);
}

.clear-cache-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

/* Game Selector */
.game-selector-section {
    margin-bottom: 24px;
}

.game-selector-label {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--text-muted);
    margin-bottom: 12px;
}

.game-selector {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 12px;
    max-height: calc(100vh - 200px);
    overflow-y: auto;
    padding-right: 8px;
}

.game-selector::-webkit-scrollbar {
    width: 8px;
}

.game-selector::-webkit-scrollbar-track {
    background: var(--bg-secondary);
    border-radius: 4px;
}

.game-selector::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 4px;
}

.game-selector::-webkit-scrollbar-thumb:hover {
    background: var(--accent-highlight);
}

.loading-more-indicator {
    display: none;
    padding: 20px;
    text-align: center;
    color: var(--text-secondary);
    font-size: 0.875rem;
}

.loading-more-indicator.loading {
    display: block;
}

.loading-more-spinner {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 2px solid var(--border-color);
    border-top-color: var(--accent-home);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-right: 8px;
    vertical-align: middle;
}

.game-card {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 16px 20px;
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
}

.game-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, transparent, var(--accent-highlight), transparent);
    opacity: 0;
    transition: opacity 0.2s ease;
}

.game-card:hover {
    border-color: var(--accent-highlight);
    transform: translateY(-2px);
}

.game-card:hover::before {
    opacity: 1;
}

.game-card.selected {
    border-color: var(--accent-home);
    background: rgba(0, 212, 170, 0.08);
}

.game-card.selected::before {
    opacity: 1;
    background: var(--accent-home);
}

.game-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 4px;
}

.game-teams {
    display: flex;
    align-items: center;
    gap: 12px;
    font-weight: 600;
    font-size: 1rem;
}

.game-vs {
    color: var(--text-muted);
    font-weight: 400;
    font-size: 0.75rem;
}

.game-date {
    display: flex;
    flex-direction: column;
    gap: 2px;
    margin-top: 8px;
    margin-bottom: 4px;
}

.game-date-text {
    font-size: 0.75rem;
    color: var(--text-secondary);
    font-weight: 500;
}

.game-time-text {
    font-size: 0.625rem;
    color: var(--text-muted);
    font-family: 'JetBrains Mono', monospace;
}

.game-score {
    font-family: 'JetBrains Mono', monospace;
    color: var(--text-secondary);
    font-size: 0.875rem;
    margin-top: 8px;
    display: flex;
    align-items: center;
    gap: 4px;
}

.score-separator {
    color: var(--text-secondary);
}

.score-winner {
    color: var(--accent-home);
    font-weight: 700;
}

.game-card-stats {
    display: flex;
    gap: 16px;
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid var(--border-color);
    flex-wrap: wrap;
}

.stat-item {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.stat-label {
    font-size: 0.625rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.stat-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-primary);
}

.stats-section {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 24px;
    margin-top: 24px;
}

.stats-section h3 {
    font-size: 1.125rem;
    font-weight: 600;
    margin-bottom: 20px;
    color: var(--text-primary);
}

/* Stats Page Header */
/* Consistent page header style for all pages */
.page-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 24px;
    margin-bottom: 32px;
    padding-bottom: 24px;
    border-bottom: 1px solid var(--border-color);
}

.page-header > div:first-child {
    flex: 1;
}

.page-header h2 {
    font-size: 2rem;
    font-weight: 700;
    margin: 0 0 8px 0;
    background: linear-gradient(135deg, var(--accent-home), var(--accent-highlight));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.page-header-subtitle {
    color: var(--text-secondary);
    font-size: 0.875rem;
    margin: 0;
    line-height: 1.5;
}

/* Legacy classes for backward compatibility */
.stats-page-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 24px;
    margin-bottom: 32px;
    padding-bottom: 24px;
    border-bottom: 1px solid var(--border-color);
}

.stats-page-header > div:first-child {
    flex: 1;
}

.export-buttons {
    display: flex;
    gap: 12px;
    align-items: center;
}

.export-btn {
    padding: 10px 20px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    color: var(--text-primary);
    border-radius: 8px;
    cursor: pointer;
    font-family: 'Space Grotesk', sans-serif;
    font-size: 0.875rem;
    font-weight: 500;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 6px;
}

.export-btn:hover {
    background: var(--bg-secondary);
    border-color: var(--accent-highlight);
    color: var(--accent-highlight);
}

.export-btn:active {
    transform: scale(0.98);
}

/* Tooltip icon styling */
.tooltip-icon {
    display: inline-block;
    margin-left: 6px;
    cursor: help;
    font-size: 0.75rem;
    opacity: 0.7;
    vertical-align: middle;
    font-style: normal;
}

.tooltip-icon:hover {
    opacity: 1;
}

/* Collapsible simulation config */
.simulation-config-collapsible {
    margin-top: 16px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    background: var(--bg-secondary);
}

.simulation-config-summary {
    padding: 12px 16px;
    cursor: pointer;
    user-select: none;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--text-secondary);
    list-style: none;
}

.simulation-config-summary::-webkit-details-marker {
    display: none;
}

.simulation-config-summary::before {
    content: '▶';
    display: inline-block;
    margin-right: 8px;
    transition: transform 0.2s;
    font-size: 0.7rem;
}

.simulation-config-collapsible[open] .simulation-config-summary::before {
    transform: rotate(90deg);
}

.simulation-config-summary:hover {
    color: var(--text-primary);
}

.simulation-config-content {
    padding: 16px;
    border-top: 1px solid var(--border-color);
}

.chart-tooltip-text {
    font-size: 0.7rem;
    color: var(--text-secondary);
    margin-top: 8px;
    line-height: 1.4;
    padding: 8px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 4px;
    max-width: 100%;
}

.stats-page-header h2 {
    font-size: 2rem;
    font-weight: 700;
    background: linear-gradient(135deg, var(--accent-home), var(--accent-highlight));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 8px;
}

.stats-page-subtitle {
    color: var(--text-secondary);
    font-size: 1rem;
    margin: 0;
}

/* Chart Container */
.chart-container {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 24px;
    margin-top: 24px;
}

.chart-container h4 {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 16px;
    color: var(--text-primary);
}

.chart-wrapper {
    position: relative;
    height: 300px;
    margin-top: 16px;
}

.chart-wrapper.large {
    height: 400px;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
}

.stats-group {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.stats-group-title {
    font-size: 0.75rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    font-weight: 600;
    margin-bottom: 4px;
}

.stat-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid var(--border-color);
}

.stat-row:last-child {
    border-bottom: none;
}

.stat-row-label {
    font-size: 0.875rem;
    color: var(--text-secondary);
}

.stat-row-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-primary);
}

.winner-indicator {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--accent-home);
    margin-right: 6px;
    box-shadow: 0 0 8px var(--accent-home);
}

.kalshi-badge {
    font-size: 0.625rem;
    padding: 2px 6px;
    border-radius: 4px;
    background: rgba(247, 147, 26, 0.2);
    color: var(--accent-kalshi);
    font-weight: 600;
    letter-spacing: 0.05em;
}

/* Chart Section */
.chart-section {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 16px;
    overflow: hidden;
}

/* Score Header */
.score-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 24px 32px;
    background: var(--bg-card);
    border-bottom: 1px solid var(--border-color);
}

.team-display {
    display: flex;
    align-items: center;
    gap: 16px;
}

.team-info {
    text-align: center;
}

.team-display.away .team-info {
    text-align: right;
}

.team-abbr {
    font-size: 2rem;
    font-weight: 700;
    letter-spacing: 0.02em;
}

.team-name {
    font-size: 0.75rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.team-score {
    font-family: 'JetBrains Mono', monospace;
    font-size: 3rem;
    font-weight: 700;
}

.score-separator {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
}

.final-badge {
    font-size: 0.625rem;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: var(--text-muted);
    padding: 4px 12px;
    border: 1px solid var(--border-color);
    border-radius: 20px;
}

.score-dash {
    font-size: 2rem;
    color: var(--text-muted);
}

/* Chart Container */
.chart-container {
    padding: 24px;
    position: relative;
}

#chart {
    width: 100%;
    height: 500px;
    border-radius: 8px;
    overflow: hidden;
}

/* Quarter Markers */
.quarter-labels {
    display: flex;
    justify-content: space-around;
    padding: 12px 24px;
    background: var(--bg-card);
    border-top: 1px solid var(--border-color);
}

.quarter-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.75rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.1em;
}

/* Toggle Controls */
.chart-toggles {
    display: flex;
    gap: 16px;
    margin-bottom: 16px;
    padding: 12px;
    background: var(--bg-card);
    border-radius: 8px;
    border: 1px solid var(--border-color);
}

.toggle-group {
    display: flex;
    align-items: center;
    gap: 8px;
}

.toggle-label {
    font-size: 0.875rem;
    color: var(--text-secondary);
    font-weight: 500;
    cursor: pointer;
    user-select: none;
}

.toggle-checkbox {
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: var(--accent-highlight);
}

.toggle-checkbox:checked + .toggle-label {
    color: var(--text-primary);
}

/* Update Controls */
.update-controls {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 24px;
    padding: 16px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 8px;
}

.update-btn {
    position: relative;
    background: var(--accent-highlight);
    border: none;
    color: var(--text-primary);
    padding: 12px 24px;
    border-radius: 8px;
    font-size: 0.875rem;
    font-weight: 600;
    font-family: 'Space Grotesk', sans-serif;
    cursor: pointer;
    transition: all 0.2s ease;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.update-btn:hover:not(:disabled) {
    background: #8b4ff0;
    transform: translateY(-1px);
}

.update-btn:active:not(:disabled) {
    transform: translateY(0);
}

.update-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.update-btn.updating {
    opacity: 0.8;
    position: relative;
    padding-right: 40px;
}

.update-btn.updating::after {
    content: '';
    position: absolute;
    width: 16px;
    height: 16px;
    top: 50%;
    right: 12px;
    transform: translateY(-50%);
    border: 2px solid var(--text-primary);
    border-top-color: transparent;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

@keyframes spin {
    to { transform: translateY(-50%) rotate(360deg); }
}

.new-games-badge {
    display: none;
    position: absolute;
    top: -6px;
    right: -6px;
    background: var(--accent-away);
    color: white;
    font-size: 0.7rem;
    font-weight: 700;
    padding: 3px 6px;
    border-radius: 10px;
    min-width: 18px;
    text-align: center;
    line-height: 1.2;
    z-index: 10;
}

.update-status {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    margin-top: 8px;
    font-size: 0.75rem;
    color: var(--text-secondary);
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    padding: 8px 12px;
    display: none;
    z-index: 100;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.app-header {
    position: relative;
}

.update-btn.nav-link {
    position: relative;
}

.update-btn.nav-link:hover:not(:disabled) {
    /* Use same hover style as other nav buttons */
}

.update-btn.nav-link:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.update-btn.nav-link.updating {
    opacity: 0.8;
    padding-right: 40px;
}

.update-btn.nav-link.updating::after {
    content: '';
    position: absolute;
    width: 14px;
    height: 14px;
    top: 50%;
    right: 12px;
    transform: translateY(-50%);
    border: 2px solid var(--text-primary);
    border-top-color: transparent;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

/* Legend */
.chart-legend {
    display: flex;
    justify-content: center;
    gap: 32px;
    padding: 16px;
    background: var(--bg-card);
    border-top: 1px solid var(--border-color);
    flex-wrap: wrap;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 8px;
}

.legend-line {
    width: 24px;
    height: 3px;
    border-radius: 2px;
}

.legend-line.home {
    background: var(--accent-home);
}

.legend-line.away {
    background: var(--accent-away);
}

.legend-line.kalshi {
    background: var(--accent-kalshi);
}

.legend-line.dashed {
    background: repeating-linear-gradient(
        90deg,
        currentColor,
        currentColor 4px,
        transparent 4px,
        transparent 8px
    );
}

.legend-text {
    font-size: 0.875rem;
    color: var(--text-secondary);
}

.legend-source {
    font-size: 0.625rem;
    color: var(--text-muted);
    margin-left: 4px;
}

/* Loading State */
.loading {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 500px;
    color: var(--text-secondary);
}

.loading-spinner {
    width: 40px;
    height: 40px;
    border: 3px solid var(--border-color);
    border-top-color: var(--accent-home);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-right: 16px;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Empty State */
.empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 500px;
    color: var(--text-secondary);
}

.empty-state-icon {
    font-size: 3rem;
    margin-bottom: 16px;
    opacity: 0.5;
}

/* Tooltip */
.tooltip {
    position: absolute;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 12px 16px;
    pointer-events: none;
    z-index: 100;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.875rem;
}

.tooltip-time {
    color: var(--text-muted);
    font-size: 0.75rem;
    margin-bottom: 8px;
}

.tooltip-probs {
    display: flex;
    gap: 16px;
}

.tooltip-home {
    color: var(--accent-home);
}

.tooltip-away {
    color: var(--accent-away);
}

.tooltip-kalshi {
    color: var(--accent-kalshi);
}

/* Back Button */
.game-detail-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 24px;
    gap: 24px;
    flex-wrap: wrap;
}

.back-button-container {
    margin-bottom: 0;
}

.back-button {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    color: var(--text-primary);
    padding: 10px 20px;
    border-radius: 8px;
    font-family: 'Space Grotesk', sans-serif;
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.back-button:hover {
    background: var(--bg-secondary);
    border-color: var(--accent-highlight);
    color: var(--accent-highlight);
}

.back-button:active {
    transform: translateY(1px);
}

.game-selector-container {
    display: flex;
    align-items: center;
    gap: 12px;
    flex: 1;
    min-width: 300px;
    max-width: 500px;
}

.game-selector-label {
    font-size: 0.875rem;
    color: var(--text-secondary);
    white-space: nowrap;
}

.game-selector {
    flex: 1;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    color: var(--text-primary);
    padding: 10px 16px;
    border-radius: 8px;
    font-size: 0.875rem;
    font-family: 'Space Grotesk', sans-serif;
    cursor: pointer;
    transition: all 0.2s ease;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23888899' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    padding-right: 36px;
}

.game-selector:hover {
    border-color: var(--accent-highlight);
    background-color: var(--bg-secondary);
}

.game-selector:focus {
    outline: none;
    border-color: var(--accent-highlight);
    box-shadow: 0 0 0 2px rgba(124, 58, 237, 0.2);
}

.game-selector option {
    background: var(--bg-card);
    color: var(--text-primary);
}

/* Aggregate Stats Summary Cards */
.aggregate-stats-summary {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 40px;
}

.summary-card {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 24px;
    text-align: center;
    transition: all 0.2s ease;
}

.summary-card:hover {
    border-color: var(--accent-highlight);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(124, 58, 237, 0.1);
}

.summary-value {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--accent-home);
    margin-bottom: 8px;
    font-family: 'JetBrains Mono', monospace;
}

.summary-label {
    font-size: 0.875rem;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-weight: 500;
}

/* Stats Page Header */
/* Legacy stats-page-subtitle for backward compatibility */
.stats-page-subtitle {
    color: var(--text-secondary);
    font-size: 0.875rem;
    margin: 0;
    line-height: 1.5;
}

/* Chart Container for Aggregate Stats */
.chart-container {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 24px;
    margin-top: 24px;
}

.chart-container h4 {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 15px;
}

.chart-container canvas {
    max-height: 400px;
}

/* Tooltip Styles */
.tooltip-icon {
    display: inline-block;
    width: 16px;
    height: 16px;
    margin-left: 6px;
    cursor: help;
    position: relative;
    vertical-align: middle;
    color: var(--text-muted);
    font-size: 0.75rem;
    line-height: 16px;
    text-align: center;
    border: 1px solid var(--border-color);
    border-radius: 50%;
    background: var(--bg-secondary);
    transition: all 0.2s ease;
}

.tooltip-icon:hover {
    color: var(--accent-highlight);
    border-color: var(--accent-highlight);
    background: var(--bg-card);
}

.tooltip-content {
    display: none;
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    margin-bottom: 8px;
    width: 300px;
    padding: 12px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
    z-index: 1000;
    font-size: 0.875rem;
    line-height: 1.5;
    color: var(--text-primary);
    pointer-events: none;
    white-space: normal;
}

.tooltip-icon {
    position: relative;
}

.tooltip-icon:hover .tooltip-content {
    display: block;
}

/* Tooltip arrow */
.tooltip-content::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 6px solid transparent;
    border-top-color: var(--border-color);
}

.tooltip-content::before {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 5px solid transparent;
    border-top-color: var(--bg-card);
    margin-top: -1px;
}

.tooltip-content strong {
    color: var(--accent-highlight);
    display: block;
    margin-bottom: 6px;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.tooltip-content p {
    margin: 0;
    color: var(--text-secondary);
}

.stat-row-label,
.stats-group-title,
h4,
h5 {
    position: relative;
}

/* Filters Container */
.filters-container {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 16px;
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    align-items: center;
}

.filter-group {
    display: flex;
    align-items: center;
    gap: 8px;
}

.filter-group label {
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.filter-group select,
.filter-group input {
    padding: 6px 12px;
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 0.875rem;
    cursor: pointer;
}

.filter-group input[type="text"] {
    width: 100px;
}

.filter-group input[type="date"] {
    cursor: text;
}

#clearFilters {
    padding: 6px 12px;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 0.875rem;
    cursor: pointer;
    margin-left: auto;
}

#clearFilters:hover {
    background: var(--bg-card);
    border-color: var(--accent-highlight);
}

/* View Transitions */
.game-list-view,
.game-detail-view {
    animation: fadeIn 0.3s ease-in;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Live Games Styles */
.live-games-list-view {
    animation: fadeIn 0.3s ease-in;
}

.live-games-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 24px;
    margin-bottom: 32px;
    padding-bottom: 24px;
    border-bottom: 1px solid var(--border-color);
}

.live-games-header h2 {
    font-size: 2rem;
    font-weight: 700;
    margin: 0 0 8px 0;
    background: linear-gradient(135deg, var(--accent-home), var(--accent-highlight));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.live-games-controls {
    display: flex;
    align-items: flex-start;
    gap: 16px;
    flex-shrink: 0;
}

.refresh-button {
    padding: 8px 16px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    color: var(--text-primary);
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.refresh-button:hover {
    background: var(--bg-secondary);
    border-color: var(--accent-highlight);
}

.auto-refresh-indicator {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.refresh-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--accent-home);
    animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}

.live-games-container {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.live-game-card {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 16px 20px;
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
}

.live-game-card:hover {
    border-color: var(--accent-highlight);
    transform: translateY(-2px);
}

.live-game-card.status-live {
    border-left: 4px solid var(--accent-home);
}

.live-game-card.status-halftime {
    border-left: 4px solid var(--accent-kalshi);
}

.live-game-card.status-other {
    border-left: 4px solid var(--text-muted);
}

.live-game-status {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 12px;
}

.status-indicator {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--text-muted);
}

.status-indicator.status-connected {
    background: var(--accent-home);
    animation: pulse 2s ease-in-out infinite;
}

.status-indicator.status-connecting,
.status-indicator.status-reconnecting {
    background: var(--accent-kalshi);
    animation: pulse 1s ease-in-out infinite;
}

.status-indicator.status-error {
    background: var(--accent-away);
}

.status-indicator.status-disconnected {
    background: var(--text-muted);
}

.status-text {
    font-size: 0.75rem;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.live-game-teams {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
}

.live-game-team {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
}

.live-game-team.home {
    flex-direction: column-reverse;
}

.live-game-team .team-abbr {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text-primary);
}

.live-game-team .team-score {
    font-family: 'JetBrains Mono', monospace;
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
}

.live-game-vs {
    font-size: 0.875rem;
    color: var(--text-muted);
}

.live-game-meta {
    margin-top: 8px;
    font-size: 0.75rem;
    color: var(--text-muted);
}

.live-game-detail-view {
    animation: fadeIn 0.3s ease-in;
}

.live-game-status-bar {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 12px 16px;
    margin-bottom: 16px;
}

.connection-status {
    display: flex;
    align-items: center;
    gap: 8px;
}

.live-badge {
    font-size: 0.625rem;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: var(--accent-home);
    padding: 4px 12px;
    border: 1px solid var(--accent-home);
    border-radius: 20px;
    background: rgba(0, 212, 170, 0.1);
    animation: pulse 2s ease-in-out infinite;
}

.error-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 500px;
    text-align: center;
}

.error-icon {
    font-size: 3rem;
    margin-bottom: 16px;
    opacity: 0.5;
}

.error-state h3 {
    font-size: 1.25rem;
    margin-bottom: 8px;
    color: var(--text-primary);
}

.error-state p {
    color: var(--text-secondary);
    margin-bottom: 16px;
}

.retry-button {
    padding: 8px 16px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    color: var(--text-primary);
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.retry-button:hover {
    background: var(--bg-secondary);
    border-color: var(--accent-highlight);
}

.header-links {
    display: flex;
    gap: 12px;
    align-items: center;
}

.live-games-link {
    padding: 8px 16px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    color: var(--text-primary);
    text-decoration: none;
    font-size: 0.875rem;
    font-weight: 500;
    transition: all 0.2s ease;
}

.live-games-link:hover {
    background: var(--bg-secondary);
    border-color: var(--accent-highlight);
}


/* Simulation Page Styles */
.simulation-container {
    max-width: 1200px;
    margin: 0 auto;
}

.simulation-header {
    margin-bottom: 32px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    padding-bottom: 24px;
    border-bottom: 1px solid var(--border-color);
}

.simulation-header h2 {
    font-size: 2rem;
    margin: 0;
    background: linear-gradient(135deg, var(--accent-home), var(--accent-highlight));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.simulation-description {
    color: var(--text-secondary);
    font-size: 1rem;
    line-height: 1.6;
}

.simulation-explanation {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 24px;
    margin-bottom: 32px;
}

.simulation-explanation h3 {
    font-size: 1.25rem;
    margin-bottom: 16px;
    color: var(--text-primary);
}

.explanation-content {
    display: grid;
    gap: 24px;
}

.strategy-section,
.profit-section,
.disclaimer-section {
    padding: 16px;
    background: var(--bg-secondary);
    border-radius: 8px;
    border: 1px solid var(--border-color);
}

.strategy-section h4,
.profit-section h4 {
    font-size: 1rem;
    margin-bottom: 12px;
    color: var(--accent-home);
}

.strategy-section ul,
.profit-section ul,
.disclaimer-section ul {
    list-style: none;
    padding-left: 0;
}

.strategy-section li,
.profit-section li,
.disclaimer-section li {
    padding: 8px 0;
    color: var(--text-secondary);
    line-height: 1.6;
}

.strategy-section li strong,
.profit-section li strong {
    color: var(--text-primary);
}

.profit-section ul ul {
    margin-left: 20px;
    margin-top: 8px;
}

.disclaimer-section {
    background: rgba(247, 147, 26, 0.1);
    border-color: rgba(247, 147, 26, 0.3);
}

.disclaimer-section p {
    color: var(--text-secondary);
    margin-bottom: 12px;
    line-height: 1.6;
}

.simulation-layout {
    display: grid;
    grid-template-columns: 400px 1fr;
    gap: 24px;
    margin-bottom: 32px;
}

@media (max-width: 1024px) {
    .simulation-layout {
        grid-template-columns: 1fr;
    }
}

.simulation-controls {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 24px;
}

.simulation-chart-container {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 24px;
    min-height: 600px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.chart-placeholder {
    text-align: center;
    color: var(--text-muted);
    padding: 40px;
}

.chart-placeholder p {
    font-size: 1rem;
    margin: 0;
}

#simulationChartElement {
    width: 100% !important;
    height: 600px !important;
    min-width: 400px;
    min-height: 600px;
    position: relative;
}

/* Game Detail Page Simulation Styles */
.simulation-toggle-btn {
    padding: 6px 12px;
    background: var(--accent-highlight);
    border: none;
    border-radius: 6px;
    color: white;
    font-weight: 500;
    font-size: 0.75rem;
    cursor: pointer;
    transition: all 0.2s ease;
}

.simulation-toggle-btn:hover {
    background: #6d28d9;
    transform: translateY(-1px);
}

.simulation-section {
    margin-top: 24px;
    padding: 20px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 12px;
}

.simulation-controls-compact {
    display: flex;
    flex-direction: column;
    gap: 16px;
    margin-bottom: 32px;
}

.simulation-inputs-row {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 12px;
    align-items: end;
}

@media (max-width: 1200px) {
    .simulation-inputs-row {
        grid-template-columns: repeat(4, 1fr);
    }
    
    .results-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
    }
}

@media (max-width: 768px) {
    .simulation-inputs-row {
        grid-template-columns: 1fr;
    }
}

/* Grid Search Specific Styles */
.grid-search-section {
    margin-bottom: 16px;
}

.grid-search-section:last-of-type {
    margin-bottom: 12px;
}

.section-title {
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.checkbox-field {
    display: flex;
    align-items: flex-end;
}

.checkbox-field .checkbox-label {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    margin: 0;
    padding-bottom: 0;
    font-size: 0.875rem;
    color: var(--text-primary);
    user-select: none;
}

.checkbox-field .checkbox-label input[type="checkbox"] {
    width: auto;
    margin: 0;
    cursor: pointer;
    accent-color: var(--accent-highlight);
}

.grid-search-submit {
    display: flex;
    justify-content: flex-end;
    margin-top: 16px;
}

.grid-search-submit .btn-primary {
    min-width: 180px;
}

/* Grid Search Page Scoped Styles */
#gridSearchView {
    position: relative;
}

/* Form Container - Constrain width and center */
#gridSearchView .grid-search-form-container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 0 1rem;
}

/* Sticky Loading Overlay - Match form width and prevent layout jump */
#gridSearchView .grid-search-loading-overlay {
    position: sticky;
    top: 0;
    z-index: 1000;
    background: var(--bg-card);
    border-bottom: 2px solid var(--accent-highlight);
    padding: 1rem;
    margin-bottom: 1rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    /* Reserve space to prevent layout jump */
    min-height: 60px;
    display: flex;
    align-items: center;
}

#gridSearchView .grid-search-loading-overlay[style*="display: none"] {
    /* When hidden, still reserve minimal space to prevent jump */
    min-height: 0;
    padding: 0;
    margin-bottom: 0;
    border-bottom: none;
    box-shadow: none;
}

#gridSearchView .grid-search-loading-content {
    display: flex;
    align-items: center;
    gap: 1rem;
    max-width: 1000px;
    margin: 0 auto;
    width: 100%;
    padding: 0 1rem;
}

#gridSearchView .grid-search-loading-text {
    flex: 1;
    font-size: 0.875rem;
    color: var(--text-primary);
}

#gridSearchView .grid-search-loading-content .loading-spinner {
    flex-shrink: 0;
}

/* Override simulation-inputs-row only for grid search */
#gridSearchView .simulation-inputs-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 16px;
    align-items: start;
}

#gridSearchView .range-fieldset:hover {
    border-color: rgba(124, 58, 237, 0.3);
}

#gridSearchView input:focus,
#gridSearchView select:focus {
    box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.1);
}

/* Basic Settings Grid */
#gridSearchView .grid-search-basic {
    margin-bottom: 1.5rem;
}

#gridSearchView .grid-search-basic-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    align-items: start;
}

/* Range Fieldsets - Cohesive Blocks, span 3 columns */
#gridSearchView .range-fieldset {
    grid-column: span 3;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 1rem;
    background: var(--bg-secondary);
    margin: 0;
    min-width: 0; /* Prevent stretching */
}

#gridSearchView .range-fieldset legend {
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    padding: 0 0.5rem;
}

#gridSearchView .range-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin-top: 0.5rem;
}

/* Action Group - Bet Amount + Submit Button */
#gridSearchView .grid-search-action-group {
    grid-column: span 1;
    display: flex;
    flex-direction: column;
    gap: 12px;
    align-items: stretch;
}

#gridSearchView .grid-search-action-group .sim-input-group {
    flex: 1;
}

#gridSearchView .grid-search-submit-wrapper {
    display: flex;
    justify-content: flex-end;
    align-items: flex-end;
}

#gridSearchView .grid-search-submit-wrapper .btn-primary {
    min-width: 180px;
    flex-shrink: 0;
}

/* Advanced Settings */
#gridSearchView .grid-search-advanced {
    margin-top: 1.5rem;
    border-top: 1px solid var(--border-color);
    padding-top: 1rem;
}

#gridSearchView .grid-search-advanced summary {
    cursor: pointer;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-secondary);
    padding: 0.5rem 0;
    user-select: none;
    list-style: none;
}

#gridSearchView .grid-search-advanced summary::-webkit-details-marker {
    display: none;
}

#gridSearchView .grid-search-advanced summary::before {
    content: "▶";
    display: inline-block;
    margin-right: 0.5rem;
    transition: transform 0.2s;
    color: var(--accent-highlight);
}

#gridSearchView .grid-search-advanced[open] summary::before {
    transform: rotate(90deg);
}

#gridSearchView .grid-search-advanced-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 12px;
    margin-top: 0.75rem;
    padding-top: 0.75rem;
}

#gridSearchView .grid-search-error-wrapper {
    grid-column: 1 / -1;
}

/* Checkbox alignment in advanced section */
#gridSearchView .grid-search-advanced-grid .checkbox-field {
    display: flex;
    align-items: flex-end;
}

#gridSearchView .grid-search-advanced-grid .checkbox-field .checkbox-label {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    margin: 0;
    padding-bottom: 0;
    font-size: 0.875rem;
    color: var(--text-primary);
    user-select: none;
    width: 100%;
    min-height: 36px; /* Match input height */
    align-items: center;
}

#gridSearchView .grid-search-advanced-grid .checkbox-field .checkbox-label input[type="checkbox"] {
    width: auto;
    margin: 0;
    cursor: pointer;
    accent-color: var(--accent-highlight);
    flex-shrink: 0;
}

/* Responsive adjustments */
@media (max-width: 1000px) {
    #gridSearchView .grid-search-form-container {
        padding: 0 0.5rem;
    }
    
    #gridSearchView .grid-search-loading-content {
        padding: 0 0.5rem;
    }
}

@media (max-width: 900px) {
    #gridSearchView .grid-search-basic-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    #gridSearchView .range-fieldset {
        grid-column: span 2;
    }
    
    #gridSearchView .grid-search-action-group {
        grid-column: span 2;
        flex-direction: row;
        align-items: flex-end;
    }
    
    #gridSearchView .grid-search-submit-wrapper {
        flex: 1;
        justify-content: flex-end;
    }
}

@media (max-width: 768px) {
    #gridSearchView .grid-search-basic-grid,
    #gridSearchView .grid-search-advanced-grid {
        grid-template-columns: 1fr;
    }
    
    #gridSearchView .range-fieldset {
        grid-column: span 1;
    }
    
    #gridSearchView .range-grid {
        grid-template-columns: 1fr;
    }
    
    #gridSearchView .grid-search-action-group {
        grid-column: span 1;
        flex-direction: column;
    }
    
    #gridSearchView .grid-search-submit-wrapper {
        width: 100%;
    }
    
    #gridSearchView .grid-search-submit-wrapper .btn-primary {
        width: 100%;
    }
}

.sim-input-group {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.sim-input-group label {
    font-size: 0.75rem;
    color: var(--text-secondary);
    font-weight: 500;
}

.sim-input-group input,
.sim-input-group select {
    padding: 8px 10px;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 0.875rem;
    font-family: 'JetBrains Mono', monospace;
}

.sim-input-group input:focus,
.sim-input-group select:focus {
    outline: none;
    border-color: var(--accent-highlight);
}

.sim-input-group select {
    cursor: pointer;
}

.sim-input-group select:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.sim-input-group .btn-primary {
    padding: 10px 20px;
    font-size: 0.875rem;
    width: 100%;
}

.scenario-description-compact {
    padding: 12px;
    background: var(--bg-secondary);
    border-radius: 6px;
    border: 1px solid var(--border-color);
    margin-bottom: 24px;
}

.scenario-text-compact {
    color: var(--text-primary);
    font-size: 0.875rem;
    line-height: 1.6;
    margin: 0;
}

.scenario-text-compact strong {
    color: var(--text-primary);
    font-weight: 500;
}

.scenario-text-compact span {
    color: var(--accent-home);
    font-weight: 500;
    font-family: 'JetBrains Mono', monospace;
}

.simulation-results-compact {
    margin-top: 16px;
    padding: 16px;
    background: var(--bg-secondary);
    border-radius: 8px;
    border: 1px solid var(--border-color);
}

.results-inline {
    display: flex;
    flex-wrap: wrap;
    gap: 24px;
    font-size: 0.875rem;
}

.results-inline span {
    color: var(--text-secondary);
}

.results-inline strong {
    color: var(--text-primary);
    margin-right: 4px;
}

.control-group {
    margin-bottom: 20px;
}

.control-group label {
    display: block;
    margin-bottom: 8px;
    color: var(--text-primary);
    font-weight: 500;
    font-size: 0.875rem;
}

.control-group input,
.control-group select {
    width: 100%;
    max-width: 300px;
    padding: 10px 12px;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-primary);
    font-size: 0.875rem;
    font-family: 'JetBrains Mono', monospace;
}

.control-group input:focus,
.control-group select:focus {
    outline: none;
    border-color: var(--accent-highlight);
}

.game-select {
    font-family: 'Space Grotesk', sans-serif;
    cursor: pointer;
}

.help-text {
    display: block;
    margin-top: 4px;
    font-size: 0.75rem;
    color: var(--text-muted);
}

.scenario-description {
    margin-bottom: 24px;
    padding: 12px 16px;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
}

.scenario-text {
    color: var(--text-primary);
    font-size: 0.9375rem;
    line-height: 1.6;
    margin: 0;
    font-weight: 400;
}

.scenario-text strong {
    color: var(--text-primary);
    font-weight: 500;
}

.scenario-text span {
    color: var(--accent-home);
    font-weight: 500;
    font-family: 'JetBrains Mono', monospace;
}

.btn-primary {
    padding: 12px 24px;
    background: var(--accent-highlight);
    border: none;
    border-radius: 8px;
    color: white;
    font-weight: 600;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-primary:hover:not(:disabled) {
    background: #6d28d9;
    transform: translateY(-1px);
}

.btn-primary:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.simulation-results {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 24px;
    margin-top: 32px;
    margin-bottom: 32px;
}

.results-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 24px;
}

.results-header > div:first-child {
    flex: 1;
}

.simulation-results h3 {
    font-size: 1.5rem;
    margin: 0;
    color: var(--text-primary);
}

.sample-size-badge {
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin-top: 4px;
}

.results-summary {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
    margin-bottom: 32px;
}

.summary-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 20px;
    text-align: center;
}

.summary-label {
    font-size: 0.75rem;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 8px;
}

.summary-value {
    font-size: 1.75rem;
    font-weight: 700;
    font-family: 'JetBrains Mono', monospace;
    color: var(--text-primary);
}

.summary-value.positive {
    color: var(--accent-home);
}

.summary-value.negative {
    color: var(--accent-away);
}

.results-metadata {
    margin-top: 32px;
    padding: 20px;
    background: var(--bg-secondary);
    border-radius: 8px;
    border: 1px solid var(--border-color);
}

.metadata-summary {
    cursor: pointer;
    list-style: none;
    user-select: none;
}

.metadata-summary::-webkit-details-marker {
    display: none;
}

.metadata-summary::before {
    content: '▶ ';
    display: inline-block;
    margin-right: 8px;
    transition: transform 0.2s ease;
    color: var(--text-secondary);
}

#gridSearchView .grid-search-advanced[open] {
    background: var(--bg-secondary);
    padding: 1rem;
    border-radius: 8px;
  }

.results-metadata[open] .metadata-summary::before {
    transform: rotate(90deg);
}

.results-details h4,
.results-metadata h4 {
    font-size: 1.125rem;
    margin-bottom: 16px;
    color: var(--text-primary);
}

.trades-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.game-link {
    color: var(--accent-highlight);
    text-decoration: none;
    font-weight: 500;
    transition: color 0.2s ease;
}

.game-link:hover {
    color: #6d28d9;
    text-decoration: underline;
}

.trade-item {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 16px;
}

.trade-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 12px;
}

.trade-number {
    font-weight: 600;
    color: var(--text-primary);
}

.trade-type {
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 500;
}

.trade-type.long_espn {
    background: rgba(0, 212, 170, 0.15);
    color: var(--accent-home);
}

.trade-type.short_espn {
    background: rgba(255, 107, 107, 0.15);
    color: var(--accent-away);
}

.trade-profit {
    margin-left: auto;
    font-size: 1.125rem;
    font-weight: 700;
    font-family: 'JetBrains Mono', monospace;
}

.trade-profit.positive {
    color: var(--accent-home);
}

.trade-profit.negative {
    color: var(--accent-away);
}

.trade-details {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.trade-detail-row {
    display: flex;
    gap: 12px;
    font-size: 0.875rem;
}

.detail-label {
    color: var(--text-secondary);
    min-width: 60px;
}

.detail-value {
    color: var(--text-secondary);
    font-family: 'JetBrains Mono', monospace;
}

.no-trades {
    text-align: center;
    color: var(--text-secondary);
    padding: 24px;
}

.metadata-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.metadata-item {
    display: flex;
    gap: 12px;
    padding: 12px;
    background: var(--bg-secondary);
    border-radius: 6px;
    border: 1px solid var(--border-color);
}

.metadata-label {
    font-weight: 500;
    color: var(--text-secondary);
    min-width: 120px;
}

.metadata-value {
    color: var(--text-primary);
    font-family: 'JetBrains Mono', monospace;
}

.error-message {
    background: rgba(255, 107, 107, 0.1);
    border: 1px solid rgba(255, 107, 107, 0.3);
    border-radius: 8px;
    padding: 16px;
    color: var(--accent-away);
    margin-bottom: 24px;
}

.loading-indicator {
    text-align: center;
    padding: 32px;
    color: var(--text-secondary);
}

/* Simulation Results - Additional Metrics */
.results-section {
    margin-top: 32px;
    padding: 20px;
    background: var(--bg-secondary);
    border-radius: 8px;
    border: 1px solid var(--border-color);
}

.results-section h4 {
    margin: 0 0 16px 0;
    color: var(--text-primary);
    font-size: 1.1rem;
    font-weight: 600;
}

.position-breakdown {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
}

.position-card {
    padding: 16px;
    background: var(--bg-primary);
    border-radius: 6px;
    border: 1px solid var(--border-color);
}

.position-header {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 12px;
    font-size: 0.95rem;
}

.position-stats {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
}

.position-stat {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.875rem;
}

.stat-label {
    color: var(--text-secondary);
}

.stat-value {
    font-weight: 500;
    font-family: 'JetBrains Mono', monospace;
    color: var(--text-primary);
}

.risk-metrics-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
}

.risk-card {
    padding: 12px;
    background: var(--bg-primary);
    border-radius: 6px;
    border: 1px solid var(--border-color);
    text-align: center;
}

.risk-label {
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
    flex-wrap: wrap;
    position: relative; /* Required for tooltip positioning */
}

/* Tooltip icons in risk labels use same styling as aggregate stats */
.risk-label .tooltip-icon {
    /* Uses global .tooltip-icon styles from aggregate stats */
}

/* Simulation loading indicator */
.simulation-loading {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 200px;
    padding: 0 24px;
    margin: -40px 0 24px 0;
}

.simulation-loading .loading {
    text-align: center;
}

.sim-button-container {
    position: relative; /* For absolute positioning of loading indicator */
    height: 44px; /* Match button height to prevent vertical shifts */
    display: inline-block; /* Don't expand to fill grid cell */
}

.sim-button-container .btn-primary {
    height: 44px; /* Fixed height to prevent jumping */
    width: 160px; /* Fixed width - button will always be this size */
    box-sizing: border-box;
}

.simulation-loading-inline {
    display: flex;
    align-items: center;
    gap: 8px;
    white-space: nowrap;
    height: 44px; /* Match button height */
    position: absolute; /* Position absolutely so it doesn't affect grid layout */
    left: calc(100% + 12px); /* Position to the right of button with gap */
    top: 0;
}

.simulation-loading-inline #loadingProgressText {
    font-family: 'JetBrains Mono', monospace; /* Monospace prevents width changes */
    display: inline-block;
}

.risk-value {
    font-size: 1.1rem;
    font-weight: 600;
    font-family: 'JetBrains Mono', monospace;
    color: var(--text-primary);
}

.characteristics-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
}

.char-card {
    padding: 12px;
    background: var(--bg-primary);
    border-radius: 6px;
    border: 1px solid var(--border-color);
    text-align: center;
}

.char-label {
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin-bottom: 8px;
}

.char-value {
    font-size: 1rem;
    font-weight: 500;
    font-family: 'JetBrains Mono', monospace;
    color: var(--text-primary);
}

.quartiles-container {
    padding: 16px;
    background: var(--bg-primary);
    border-radius: 6px;
    height: 300px;
}

.quartiles-container canvas {
    max-height: 300px;
}

.equity-curve-container {
    padding: 16px;
    background: var(--bg-primary);
    border-radius: 6px;
    border: 1px solid var(--border-color);
    min-height: 300px;
    position: relative;
}

.equity-curve-container canvas {
    max-height: 400px;
}

.sample-size-indicator {
    font-size: 0.875rem;
    color: var(--text-secondary);
    margin-bottom: 12px;
}

.per-game-table-container {
    overflow-x: auto;
    background: var(--bg-primary);
    border-radius: 6px;
    border: 1px solid var(--border-color);
}

.per-game-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.875rem;
}

.per-game-table thead {
    background: var(--bg-secondary);
    border-bottom: 2px solid var(--border-color);
}

.per-game-table th {
    padding: 12px;
    text-align: left;
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.per-game-table td {
    padding: 10px 12px;
    border-bottom: 1px solid var(--border-color);
    color: var(--text-secondary);
}

.per-game-table tbody tr:hover {
    background: var(--bg-secondary);
}

/* Model Comparison Page Styles */
.model-comparison-section {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 24px;
    margin-top: 24px;
}

.model-comparison-section h3 {
    font-size: 1.125rem;
    font-weight: 600;
    margin-bottom: 16px;
    color: var(--text-primary);
}

.model-comparison-section .section-description {
    color: var(--text-secondary);
    font-size: 0.875rem;
    margin-bottom: 20px;
    line-height: 1.5;
}

.metrics-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 16px;
    background: var(--bg-secondary);
    border-radius: 8px;
    overflow: hidden;
}

.metrics-table thead {
    background: var(--bg-card);
}

.metrics-table th {
    padding: 12px 16px;
    text-align: left;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--text-primary);
    border-bottom: 1px solid var(--border-color);
}

.metrics-table th:not(:first-child) {
    text-align: right;
}

.metrics-table td {
    padding: 12px 16px;
    font-size: 0.875rem;
    color: var(--text-primary);
    border-bottom: 1px solid var(--border-color);
}

.metrics-table tbody tr:last-child td {
    border-bottom: none;
}

.metrics-table tbody tr:hover {
    background: rgba(124, 58, 237, 0.05);
}

.metrics-table .best-model-row {
    background: rgba(124, 58, 237, 0.1);
}

.best-models-summary {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 20px;
    margin-top: 24px;
}

.best-models-summary h4 {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 12px;
    color: var(--text-primary);
}

.best-models-summary ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.best-models-summary li {
    padding: 8px 0;
    font-size: 0.875rem;
    color: var(--text-secondary);
    border-bottom: 1px solid var(--border-color);
}

.best-models-summary li:last-child {
    border-bottom: none;
}

.best-models-summary li strong {
    color: var(--text-primary);
    font-weight: 600;
}

.per-game-table .mono {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.8rem;
}

.equity-curve-container {
    padding: 16px;
    background: var(--bg-primary);
    border-radius: 6px;
    border: 1px solid var(--border-color);
    min-height: 300px;
    position: relative;
}

.equity-curve-container canvas {
    max-height: 400px;
}

.sample-size-indicator {
    font-size: 0.875rem;
    color: var(--text-secondary);
    margin-bottom: 12px;
}

/* View Toggle Button */
.view-toggle-btn {
    padding: 10px 20px;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    color: var(--text-primary);
    border-radius: 8px;
    cursor: pointer;
    font-family: 'Space Grotesk', sans-serif;
    font-size: 0.875rem;
    font-weight: 500;
    transition: all 0.2s;
}

.view-toggle-btn:hover {
    background: var(--bg-secondary);
    border-color: var(--accent-highlight);
    color: var(--accent-highlight);
}

.view-toggle-btn:active {
    transform: scale(0.98);
}

/* Simplified View Container */
.simplified-view {
    /* Inherits from .simulation-results parent */
}

/* Advanced View Container */
.advanced-view {
    /* Inherits from .simulation-results parent */
}

/* Entry/Exit Conditions Section */
.entry-exit-conditions-section {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 24px;
    margin-bottom: 32px;
}

.entry-exit-conditions-section h4 {
    font-size: 1.25rem;
    margin-bottom: 16px;
    color: var(--text-primary);
}

.entry-exit-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
    margin-bottom: 20px;
}

.entry-exit-item {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.entry-exit-label {
    font-size: 0.875rem;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.entry-exit-value {
    font-size: 1.5rem;
    font-weight: 700;
    font-family: 'JetBrains Mono', monospace;
    color: var(--accent-highlight);
}

.strategy-explanation {
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid var(--border-color);
    color: var(--text-primary);
    font-size: 0.9375rem;
    line-height: 1.6;
}

.strategy-explanation strong {
    color: var(--text-primary);
    font-weight: 600;
}

.strategy-explanation ul {
    margin-top: 12px;
    margin-left: 20px;
    list-style-type: disc;
}

.strategy-explanation li {
    margin-bottom: 8px;
}

.strategy-explanation li strong {
    color: var(--accent-highlight);
}

@media (max-width: 1200px) {
    .position-breakdown {
        grid-template-columns: 1fr;
    }
    
    .risk-metrics-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .characteristics-grid {
        grid-template-columns: 1fr;
    }
    
    .entry-exit-grid {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 768px) {
    .risk-metrics-grid {
        grid-template-columns: 1fr;
    }
    
    .results-header {
        flex-direction: column;
        gap: 16px;
    }
    
    .results-header > div:last-child {
        display: flex;
        flex-direction: column;
        gap: 12px;
        width: 100%;
    }
    
    .view-toggle-btn,
    .export-btn {
        width: 100%;
    }
    
    .entry-exit-grid {
        grid-template-columns: 1fr;
    }
    
    .entry-exit-value {
        font-size: 1.25rem;
    }
    
    .strategy-explanation {
        font-size: 0.875rem;
    }
}
</style>
    
            <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
            <script>
                // Embedded comparison data
                const comparisonData = {
  "models": [
    {
      "model_label": "Logistic Regression + Platt",
      "model_color": "#7c3aed",
      "metrics": {
        "logloss": 0.46233765508610264,
        "brier": 0.15439897987422008,
        "ece": 0.022156191014754148,
        "auc": 0.8562253885590061,
        "n": 660185
      },
      "calibration_points": [
        {
          "x": 0.019155805935287772,
          "y": 0.009316696375519904,
          "n": 42075
        },
        {
          "x": 0.07506130939746426,
          "y": 0.0680825119398435,
          "n": 29523
        },
        {
          "x": 0.1256870650680045,
          "y": 0.1357389414472002,
          "n": 31288
        },
        {
          "x": 0.17475521472999314,
          "y": 0.2070284406668846,
          "n": 30590
        },
        {
          "x": 0.22456084007338495,
          "y": 0.28043234923744226,
          "n": 28588
        },
        {
          "x": 0.2747419032061811,
          "y": 0.322533795106692,
          "n": 26853
        },
        {
          "x": 0.32464800250969383,
          "y": 0.3664997261131544,
          "n": 25558
        },
        {
          "x": 0.3748238032507287,
          "y": 0.4088546994557879,
          "n": 24439
        },
        {
          "x": 0.42483832404403254,
          "y": 0.4480896504121158,
          "n": 24629
        },
        {
          "x": 0.47543052247352185,
          "y": 0.49149720537519326,
          "n": 25227
        },
        {
          "x": 0.524998704606891,
          "y": 0.5238315773223727,
          "n": 25911
        },
        {
          "x": 0.5749882662331077,
          "y": 0.5658882082695252,
          "n": 26120
        },
        {
          "x": 0.6253788046296452,
          "y": 0.6030987969376594,
          "n": 27430
        },
        {
          "x": 0.6753708478717078,
          "y": 0.6463000445984425,
          "n": 29149
        },
        {
          "x": 0.7254959417059123,
          "y": 0.6689901976038587,
          "n": 32135
        },
        {
          "x": 0.7754983202750242,
          "y": 0.7364022662889519,
          "n": 35300
        },
        {
          "x": 0.8256902965038236,
          "y": 0.8071807205261607,
          "n": 40748
        },
        {
          "x": 0.8747189799934209,
          "y": 0.8797119506683843,
          "n": 47353
        },
        {
          "x": 0.9249922859393999,
          "y": 0.9361091007779989,
          "n": 44216
        },
        {
          "x": 0.9808105125680975,
          "y": 0.9893898783563034,
          "n": 63053
        }
      ]
    },
    {
      "model_label": "Logistic Regression + Isotonic",
      "model_color": "#3b82f6",
      "metrics": {
        "logloss": 0.46251472539619104,
        "brier": 0.15399937875881528,
        "ece": 0.012659334675941717,
        "auc": 0.8561859508948237,
        "n": 660185
      },
      "calibration_points": [
        {
          "x": 0.013128713290030534,
          "y": 0.012937563110063952,
          "n": 47536
        },
        {
          "x": 0.07590104887869094,
          "y": 0.060625,
          "n": 14400
        },
        {
          "x": 0.11899206752146324,
          "y": 0.121603502531126,
          "n": 36545
        },
        {
          "x": 0.17335812821411695,
          "y": 0.19699665948612283,
          "n": 32031
        },
        {
          "x": 0.21888382659700498,
          "y": 0.2682785219591092,
          "n": 24113
        },
        {
          "x": 0.27185983302385125,
          "y": 0.3113389378716424,
          "n": 24385
        },
        {
          "x": 0.3224137143223795,
          "y": 0.3411729857819905,
          "n": 16880
        },
        {
          "x": 0.37318011048011457,
          "y": 0.3739992161693074,
          "n": 17861
        },
        {
          "x": 0.4153298117787539,
          "y": 0.42024054818151324,
          "n": 41738
        },
        {
          "x": 0.4723038173788335,
          "y": 0.48493803622497617,
          "n": 31470
        },
        {
          "x": 0.5239133636917264,
          "y": 0.5311281940233867,
          "n": 36944
        },
        {
          "x": 0.5733370667829073,
          "y": 0.5775167903231478,
          "n": 28439
        },
        {
          "x": 0.6223789151434774,
          "y": 0.6229881211310022,
          "n": 29885
        },
        {
          "x": 0.6763999451394862,
          "y": 0.6589711417816813,
          "n": 23910
        },
        {
          "x": 0.722668397298661,
          "y": 0.6803869246164109,
          "n": 29980
        },
        {
          "x": 0.7789442841325788,
          "y": 0.7580144094123868,
          "n": 45387
        },
        {
          "x": 0.8187924512953015,
          "y": 0.8273655396907598,
          "n": 27034
        },
        {
          "x": 0.8776407652722696,
          "y": 0.8785457451058729,
          "n": 40048
        },
        {
          "x": 0.9168121390158428,
          "y": 0.9274562864279767,
          "n": 38432
        },
        {
          "x": 0.9911472624616322,
          "y": 0.9846788852898164,
          "n": 73167
        }
      ]
    },
    {
      "model_label": "CatBoost + Platt",
      "model_color": "#f7931a",
      "metrics": {
        "logloss": 0.4505693472789605,
        "brier": 0.15089613693454512,
        "ece": 0.011158592440768512,
        "auc": 0.8615444826863906,
        "n": 660185
      },
      "calibration_points": [
        {
          "x": 0.01094113685275293,
          "y": 0.014942785088095524,
          "n": 58289
        },
        {
          "x": 0.0756075415396992,
          "y": 0.07335577789368865,
          "n": 21089
        },
        {
          "x": 0.12581091103906375,
          "y": 0.13845510317902956,
          "n": 21516
        },
        {
          "x": 0.17510404139628047,
          "y": 0.18412743972445464,
          "n": 20904
        },
        {
          "x": 0.22566294518956687,
          "y": 0.2414739941899797,
          "n": 25129
        },
        {
          "x": 0.27451419863248433,
          "y": 0.30825082508250823,
          "n": 28785
        },
        {
          "x": 0.3253471560347425,
          "y": 0.3512142751369762,
          "n": 27012
        },
        {
          "x": 0.37513992443349575,
          "y": 0.38991115695604434,
          "n": 30053
        },
        {
          "x": 0.42452806526452025,
          "y": 0.44257693831726325,
          "n": 30284
        },
        {
          "x": 0.47494808699734736,
          "y": 0.48964770783143047,
          "n": 28641
        },
        {
          "x": 0.5248225297766653,
          "y": 0.5263906228325704,
          "n": 28836
        },
        {
          "x": 0.5753378199283924,
          "y": 0.5822818791946309,
          "n": 29800
        },
        {
          "x": 0.6251225579737432,
          "y": 0.6217081199707388,
          "n": 32808
        },
        {
          "x": 0.6748309000492162,
          "y": 0.6542644892329875,
          "n": 31903
        },
        {
          "x": 0.724887656822861,
          "y": 0.7053631359914082,
          "n": 29796
        },
        {
          "x": 0.7755097438084438,
          "y": 0.7597683094443354,
          "n": 30558
        },
        {
          "x": 0.825205426699519,
          "y": 0.8130838443463809,
          "n": 34898
        },
        {
          "x": 0.8740030532654532,
          "y": 0.8790276803899963,
          "n": 29949
        },
        {
          "x": 0.9251175481980246,
          "y": 0.9338291091212627,
          "n": 32945
        },
        {
          "x": 0.9873440898774725,
          "y": 0.9850097712380733,
          "n": 86990
        }
      ]
    },
    {
      "model_label": "CatBoost + Isotonic",
      "model_color": "#10b981",
      "metrics": {
        "logloss": 0.45194219116039086,
        "brier": 0.1511222930479507,
        "ece": 0.015381406416837624,
        "auc": 0.8614666646469337,
        "n": 660185
      },
      "calibration_points": [
        {
          "x": 0.007947085671773884,
          "y": 0.010045314191763244,
          "n": 49874
        },
        {
          "x": 0.07333459848138271,
          "y": 0.059182526298883806,
          "n": 24906
        },
        {
          "x": 0.12148177649798042,
          "y": 0.1405621301775148,
          "n": 33800
        },
        {
          "x": 0.17431201705069124,
          "y": 0.1910863958736299,
          "n": 12408
        },
        {
          "x": 0.2306825317192045,
          "y": 0.25622694313700545,
          "n": 39305
        },
        {
          "x": 0.2797647925395752,
          "y": 0.3294067000626174,
          "n": 25552
        },
        {
          "x": 0.321832507108654,
          "y": 0.3588513419552218,
          "n": 14382
        },
        {
          "x": 0.37319932668290107,
          "y": 0.3844444444444444,
          "n": 29700
        },
        {
          "x": 0.42579274690790125,
          "y": 0.4375101907712376,
          "n": 24532
        },
        {
          "x": 0.46855120515244086,
          "y": 0.47947226556958433,
          "n": 35245
        },
        {
          "x": 0.5268632807854882,
          "y": 0.5286844567960752,
          "n": 35263
        },
        {
          "x": 0.5725513228353373,
          "y": 0.5869432082635855,
          "n": 24493
        },
        {
          "x": 0.6270757504953194,
          "y": 0.6219610234801652,
          "n": 36073
        },
        {
          "x": 0.677120391022092,
          "y": 0.6548522206416943,
          "n": 25308
        },
        {
          "x": 0.723517228678402,
          "y": 0.695145359997208,
          "n": 28653
        },
        {
          "x": 0.7618463385749048,
          "y": 0.744384884596642,
          "n": 22573
        },
        {
          "x": 0.8231220880015571,
          "y": 0.7972140557188856,
          "n": 42858
        },
        {
          "x": 0.8631558923043805,
          "y": 0.8780657852145116,
          "n": 40161
        },
        {
          "x": 0.9191762714996845,
          "y": 0.9374559051784959,
          "n": 28348
        },
        {
          "x": 0.9900628516198544,
          "y": 0.9850606909430439,
          "n": 86751
        }
      ]
    }
  ],
  "best_models": {
    "logloss": "CatBoost + Platt",
    "brier": "CatBoost + Platt",
    "ece": "CatBoost + Platt",
    "auc": "CatBoost + Platt"
  }
};
                
                // Initialize chart when page loads
                window.addEventListener('load', function() {
                    const canvas = document.getElementById('modelComparisonCalibrationChart');
                    if (!canvas) return;
                    
                    const ctx = canvas.getContext('2d');
                    const { models } = comparisonData;
                    
                    // Build datasets for all models - dots only, no lines
                    const datasets = models.map(model => ({
                        label: model.model_label,
                        data: model.calibration_points.map(p => ({
                            x: p.x,
                            y: p.y,
                            n: p.n
                        })),
                        backgroundColor: model.model_color + '40', // More transparent
                        borderColor: model.model_color,
                        pointRadius: model.calibration_points.map(p => {
                            const n = p.n || 0;
                            return Math.max(4, Math.min(12, 4 + (n / 10000)));
                        }),
                        pointHoverRadius: 10,
                        fill: false,
                        showLine: false, // No lines, just dots
                        tension: 0
                    }));
                    
                    // Add perfect calibration line
                    datasets.push({
                        label: 'Perfect Calibration (y = x)',
                        data: [{ x: 0, y: 0 }, { x: 1, y: 1 }],
                        type: 'line',
                        borderColor: 'rgba(255, 255, 255, 0.5)',
                        borderWidth: 2,
                        borderDash: [5, 5],
                        pointRadius: 0,
                        fill: false,
                        tension: 0
                    });
                    
                    new Chart(ctx, {
                        type: 'scatter',
                        data: { datasets },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                x: {
                                    type: 'linear',
                                    position: 'bottom',
                                    title: {
                                        display: true,
                                        text: 'Predicted Probability',
                                        color: '#888899'
                                    },
                                    min: 0,
                                    max: 1,
                                    ticks: { color: '#888899' },
                                    grid: { color: '#2a2a40' }
                                },
                                y: {
                                    type: 'linear',
                                    position: 'left',
                                    title: {
                                        display: true,
                                        text: 'Observed Win Rate',
                                        color: '#888899'
                                    },
                                    min: 0,
                                    max: 1,
                                    ticks: { color: '#888899' },
                                    grid: { color: '#2a2a40' }
                                }
                            },
                            plugins: {
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            if (context.dataset.label === 'Perfect Calibration (y = x)') {
                                                return context.dataset.label;
                                            }
                                            const point = context.raw;
                                            const gap = point.y - point.x;
                                            const gapText = gap > 0 ? `+${(gap * 100).toFixed(2)}%` : `${(gap * 100).toFixed(2)}%`;
                                            return [
                                                `Model: ${context.dataset.label}`,
                                                `Predicted: ${(point.x * 100).toFixed(1)}%`,
                                                `Actual: ${(point.y * 100).toFixed(1)}%`,
                                                `Gap: ${gapText}`,
                                                `Samples: ${point.n || 0}`
                                            ];
                                        }
                                    }
                                },
                                legend: {
                                    display: true,
                                    position: 'top',
                                    labels: {
                                        color: '#888899',
                                        filter: (item) => item.text !== 'Perfect Calibration (y = x)'
                                    }
                                }
                            }
                        }
                    });
                });
            </script>
        
</head>
<body>
    <div class="stats-page-view" style="display: block;">
        <div class="page-header">
            <div>
                <h2>Model Comparison</h2>
                <p class="page-header-subtitle">2×2 Matrix: Logistic Regression vs CatBoost × Platt vs Isotonic Calibration</p>
            </div>
        </div>
        <div class="model-comparison-container" id="modelComparisonContainer">
            
        <div class="model-comparison-section">
            <h3>Overall Metrics Comparison</h3>
            <table class="metrics-table">
                <thead>
                    <tr>
                        <th>Model</th>
                        <th style="text-align: right;">Log Loss</th>
                        <th style="text-align: right;">Brier Score</th>
                        <th style="text-align: right;">ECE</th>
                        <th style="text-align: right;">AUC</th>
                        <th style="text-align: right;">N</th>
                    </tr>
                </thead>
                <tbody>
    
            <tr class="">
                <td><strong>Logistic Regression + Platt</strong></td>
                <td style="text-align: right; ">0.462338</td>
                <td style="text-align: right; ">0.154399</td>
                <td style="text-align: right; ">0.022156</td>
                <td style="text-align: right; ">0.856225</td>
                <td style="text-align: right;">660,185</td>
            </tr>
        
            <tr class="">
                <td><strong>Logistic Regression + Isotonic</strong></td>
                <td style="text-align: right; ">0.462515</td>
                <td style="text-align: right; ">0.153999</td>
                <td style="text-align: right; ">0.012659</td>
                <td style="text-align: right; ">0.856186</td>
                <td style="text-align: right;">660,185</td>
            </tr>
        
            <tr class="best-model-row">
                <td><strong>CatBoost + Platt</strong></td>
                <td style="text-align: right; font-weight: bold; color: var(--accent);">0.450569</td>
                <td style="text-align: right; font-weight: bold; color: var(--accent);">0.150896</td>
                <td style="text-align: right; font-weight: bold; color: var(--accent);">0.011159</td>
                <td style="text-align: right; font-weight: bold; color: var(--accent);">0.861544</td>
                <td style="text-align: right;">660,185</td>
            </tr>
        
            <tr class="">
                <td><strong>CatBoost + Isotonic</strong></td>
                <td style="text-align: right; ">0.451942</td>
                <td style="text-align: right; ">0.151122</td>
                <td style="text-align: right; ">0.015381</td>
                <td style="text-align: right; ">0.861467</td>
                <td style="text-align: right;">660,185</td>
            </tr>
        
                </tbody>
            </table>
        </div>
    
        <div class="best-models-summary">
            <h4>Best Models by Metric</h4>
            <ul>
                <li><strong>Log Loss</strong> (lower is better): CatBoost + Platt</li>
                <li><strong>Brier Score</strong> (lower is better): CatBoost + Platt</li>
                <li><strong>ECE</strong> (lower is better): CatBoost + Platt</li>
                <li><strong>AUC</strong> (higher is better): CatBoost + Platt</li>
            </ul>
        </div>
    
        <div class="model-comparison-section">
            <h3>Calibration Comparison</h3>
            <p class="section-description">All 4 models plotted together. Points closer to the diagonal line (y=x) indicate better calibration.</p>
            <div class="chart-wrapper" style="height: 600px;">
                <canvas id="modelComparisonCalibrationChart" width="2604" height="1200" style="display: block; box-sizing: border-box; height: 600px; width: 1302px;"></canvas>
            </div>
        </div>
    
        </div>
    </div>
</body>
</html>